webpackJsonp([1],{"+7bJ":function(t,e){},"+hXE":function(t,e){},"0jrQ":function(t,e){},"34+y":function(t,e){},AOQV:function(t,e){},CLDk:function(t,e){},CcXR:function(t,e){},Cz6C:function(t,e){},GlCO:function(t,e){},HBIl:function(t,e){},I1G2:function(t,e){},Lrbi:function(t,e){},NHnr:function(t,e,a){"use strict";function n(t,e){return e.length?n(t[e[0]],e.slice(1)):t}Object.defineProperty(e,"__esModule",{value:!0});var s={};a.d(s,"sendAjax",function(){return jt});a("34+y");var i=a("X+yh"),o=a.n(i),r=a("//Fk"),l=a.n(r),c=(a("qONS"),a("UQTY")),u=a.n(c),d=(a("goBr"),a("IBPZ")),p=a.n(d),m=(a("GlCO"),a("Ttp7")),h=a.n(m),f=(a("q/am"),a("4VPn")),g=a.n(f),v=(a("RQR2"),a("96WI")),_=a.n(v),b=(a("f1Vh"),a("ZQVe")),y=a.n(b),k=(a("lrMw"),a("7YS2")),C=a.n(k),x=(a("OgVB"),a("/Lyv")),O=a.n(x),w=(a("CcXR"),a("fKbY")),S=a.n(w),j=(a("ULTG"),a("oobK")),A=a.n(j),T=(a("UIRh"),a("uOA4")),L=a.n(T),M=(a("jayP"),a("QKkm")),$=a.n(M),F=(a("Lrbi"),a("aMxQ")),U=a.n(F),V=(a("Cz6C"),a("dU8H")),I=a.n(V),N=(a("+hXE"),a("fUV+")),D=a.n(N),E=(a("y+mr"),a("3JdW")),R=a.n(E),B=(a("XDqQ"),a("Axha")),G=a.n(B),q=a("7+uW"),H={render:function(){var t=this.$createElement;return(this._self._c||t)("mt-header",{attrs:{title:this.headerC,fixed:""}})},staticRenderFns:[]},Y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("mt-tabbar",{attrs:{id:"foots",fixed:""}},t._l(t.footer,function(e,n){return a("mt-tab-item",{key:n},[a("router-link",{attrs:{to:e.path}},[t._v(t._s(e.name))])],1)}))},staticRenderFns:[]},P={name:"app",components:{Heads:a("VU/8")({name:"heads",data:function(){return{headerC:"vue社区"}}},H,!1,function(t){a("TVDE")},null,null).exports,Foots:a("VU/8")({name:"foots",data:function(){return{footer:[{path:"/",name:"首页"},{path:"/message",name:"消息"},{path:"/about",name:"我的"}]}}},Y,!1,function(t){a("AOQV")},null,null).exports}},z={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Heads"),this._v(" "),e("div",{attrs:{id:"content"}},[e("transition",{attrs:{name:"trans-router",mode:"out-in"}},[e("keep-alive",[this.$route.meta.keepAlive?e("router-view"):this._e()],1)],1),this._v(" "),e("transition",{attrs:{name:"trans-router",mode:"out-in"}},[this.$route.meta.keepAlive?this._e():e("router-view")],1)],1),this._v(" "),e("Foots")],1)},staticRenderFns:[]},Q=a("VU/8")(P,z,!1,function(t){a("CLDk")},null,null).exports,Z=a("/ocq"),X=a("Dd8w"),J=a.n(X),K=(a("HBIl"),a("svqn")),W=a.n(K),tt=a("NYxO"),et={name:"scroll",data:function(){return{mescroll:null,pdlist:[]}},props:["tab","scroll"],mounted:function(){this.LOADING(!1);this.mescroll=new W.a(this.scroll,{up:{callback:this.upCallback,toTop:{},empty:{warpId:"dataList",icon:"../res/img/mescroll-empty.png",tip:"亲,暂无相关数据哦~",btntext:"去逛逛 >",btnClick:function(){alert("点击了去逛逛按钮")}}}}),document.getElementById("dataList").style.display="block";var t=document.querySelectorAll("img");this.imgLoad(t,function(t){})},methods:J()({},Object(tt.d)(["LOADING"]),{imgLoad:function(t,e){var a=this;t.forEach(function(t){var n=setInterval(function(){t.complete&&(e(t),clearInterval(n))},50);t.onerror=function(){console.log("404失败"),a.onerror=null}})},errImg:function(){console.log("失败")},upCallback:function(t){var e=this;this.LOADING(!1),function(t,a,n,s){e.$ajax.get("/topics",{params:{tab:e.tab,page:t,limit:a}}).then(function(t){var e=t.data.data;n&&n(e)}).catch(function(t){t&&console.log(t),s&&s()})}(t.num,t.size,function(a){1===t.num&&(e.pdlist=[]),e.pdlist=e.pdlist.concat(a),e.mescroll.endSuccess(a.length,!0)},function(){e.mescroll.endErr()})},tabFormat:function(t){return t.map(function(t){switch(t.tab){case"share":t.tab="分享";break;case"ask":t.tab="问答";break;case"job":t.tab="招聘"}}),t}})},at={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mescroll",attrs:{id:t.scroll}},[a("div",{staticClass:"mescroll-bounce"},[a("ul",{staticClass:"data-list",attrs:{id:"dataList"}},t._l(t.tabFormat(t.pdlist),function(e,n){return a("router-link",{key:n,attrs:{to:{path:"/details",query:{id:e.id}},tag:"li"}},[a("div",{staticClass:"list_top table"},[a("div",{staticClass:"top_img table_cell"},[a("img",{attrs:{src:e.author.avatar_url},on:{error:t.errImg}})]),t._v(" "),a("div",{staticClass:"top_title table_cell"},[a("h2",{staticClass:"two_ell"},[t._v(t._s(e.title))])]),t._v(" "),a("div",{staticClass:"top_tab table_cell"},[e.top?a("p",{staticClass:"tab",staticStyle:{background:"#e40e0e"}},[t._v("置顶")]):e.good?a("p",{staticClass:"tab"},[t._v("精华")]):a("p",{staticClass:"tab"},[t._v(t._s(e.tab))])])]),t._v(" "),a("div",{staticClass:"list_btm"},[a("div",{staticClass:"btm_left"},[a("span",[t._v(t._s(e.author.loginname))]),t._v(" "),a("span",{staticStyle:{"font-size":".6rem"}},[t._v("发布于"+t._s(t._f("timeFormat")(e.create_at)))])]),t._v(" "),a("div",{staticClass:"btm_right"},[a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-pingjia"}})]),t._v(" "),a("span",[t._v(t._s(e.reply_count))]),t._v(" "),a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-Artboard"}})]),t._v(" "),a("span",[t._v(t._s(e.visit_count))])])])])}))])])},staticRenderFns:[]},nt={name:"index",components:{Scroll:a("VU/8")(et,at,!1,function(t){a("+7bJ")},null,null).exports},data:function(){return{selected:0,swipeable:!0,navMsg:[{label:"全部",tab:"all"},{label:"精华",tab:"good"},{label:"分享",tab:"share"},{label:"问答",tab:"ask"},{label:"weex",tab:"weex"},{label:"招聘",tab:"job"}]}}},st={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"index"},[a("mt-navbar",{attrs:{fixed:""},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},t._l(t.navMsg,function(e,n){return a("mt-tab-item",{key:n,attrs:{id:n}},[t._v(t._s(e.label))])})),t._v(" "),a("mt-tab-container",{attrs:{swipeable:""},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},t._l(t.navMsg,function(e,n){return a("mt-tab-container-item",{key:n,attrs:{id:n}},[a("Scroll",{attrs:{tab:t.navMsg[n].tab,scroll:"scroll"+n}})],1)}))],1)},staticRenderFns:[]},it=a("VU/8")(nt,st,!1,function(t){a("rYKV")},null,null).exports,ot={name:"detail",data:function(){return{sessUser:"",details:"",content:"",sheetVisible:!0,followFlag:!1,actions:[{name:"返回",method:this.toBack},{name:"评论",method:this.toCommit}],idArr:[]}},mounted:function(){var t=this;this.sessUser=sessionStorage.getItem("user"),this.LOADING(!1),this.$ajax({method:"get",url:"/topic/"+this.$route.query.id}).then(function(e){switch(t.details=e.data.data,t.DETAILS(e.data.data),t.details.tab){case"share":t.details.tab="分享";break;case"ask":t.details.tab="问答";break;case"job":t.details.tab="招聘"}}).catch(function(t){t&&console.log(t)}),this.sessUser&&this.$ajax({method:"get",url:"/user/"+this.login.user.loginname}).then(function(e){t.ABOUT_INFO(e.data.data),t.about.about.collect_topics.map(function(e){-1===t.idArr.indexOf(e.id)&&t.idArr.unshift(e.id)}),-1!==t.idArr.indexOf(t.$route.query.id)?t.followFlag=!0:t.followFlag=!1})},computed:J()({},Object(tt.e)(["login","about","detail"]),Object(tt.c)([]),{orderCommit:function(){return this.details.replies.map(function(t){t.timeCount=new Date(t.create_at).getTime()}),this.orderBy(this.details.replies,"timeCount",-1)},orderUps:function(){return this.orderCommit.map(function(t){t.upLength=t.ups.length}),this.orderBy(this.orderCommit,"upLength",-1)}}),watch:{details:function(t,e){this.details=t,console.log(this.details)}},methods:J()({},Object(tt.d)(["DETAILS","ABOUT_INFO","LOADING"]),{change:function(){console.log(this.followFlag);var t="";t=this.followFlag?"collect":"de_collect",this.$ajax({method:"post",url:"/topic/"+t,data:{accesstoken:this.login.user.token,topic_id:this.$route.query.id}}).then(function(t){}).catch(function(t){t&&console.log(t)})},toLove:function(t,e,a,n){var s=this;if(!this.sessUser)return this.toLogin(),!1;var i=t.currentTarget;this.$ajax({method:"post",url:"/reply/"+e+"/ups",params:{accesstoken:this.login.user.token}}).then(function(t){"up"===t.data.action?(i.style.color="red",s.$set(s.details.replies[n].ups,a,s.login.user.id),o()({message:"点赞成功",duration:1e3})):(i.style.color="#000",s.details.replies[n].ups.splice(a-1,1),o()({message:"取消点赞",duration:1e3}))}).catch(function(t){t&&o()({message:"网络故障",duration:1e3})})},toBack:function(){this.$router.go(-1)},toCommit:function(t,e,a){var n=this,s=arguments;if(!this.sessUser)return this.toLogin(),!1;console.log(this.$route.query.id),console.log(arguments);O.a.prompt('<textarea placeholder="说点什么"></textarea>',"请输入评论内容",{closeOnClickModal:!1,confirmButtonText:"提交",showInput:!1}).then(function(a){a.value,a.action;n.sheetVisible=!0;var i=document.querySelector("textarea").value,r=null;r=3===s.length?{accesstoken:n.login.user.token,content:"@"+e+" "+i,reply_id:t}:{accesstoken:n.login.user.token,content:i},n.$ajax({method:"post",url:"/topic/"+n.$route.query.id+"/replies",data:r}).then(function(t){console.log(t),n.detail.detail.replies.unshift({author:{avatar_url:n.login.user.avatar_url,loginname:n.login.user.loginname},content:r.content,create_at:new Date,id:"",timer:new Date,ups:[]}),o()({message:"提交成功",duration:1e3})}).catch(function(t){t&&console.log(t),o()({message:"提交失败",duration:1e3})})},function(t){n.sheetVisible=!0,console.log(t)})},toLogin:function(){this.$router.replace({path:"/login",query:{redirect:this.$route.fullPath}})},isUp:function(t){return-1!==t.indexOf(this.login.user.id)}})},rt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"details"},[t.details?a("div",{attrs:{id:"details"}},[a("h1",{on:{click:function(e){t.sheetVisible=!t.sheetVisible}}},[t._v(t._s(t.details.title))]),t._v(" "),a("div",{staticClass:"table",style:{marginTop:"1rem",width:"100%"}},[a("div",{staticClass:"table_cell",staticStyle:{width:"12%"}},[a("img",{attrs:{src:t.details.author.avatar_url,alt:"author"}})]),t._v(" "),a("div",{staticClass:"table_cell",staticStyle:{width:"63%",padding:"0 .5rem"}},[a("p",[t._v(t._s(t.details.author.loginname))]),t._v(" "),a("span",[t._v(t._s(t._f("timeFormat")(t.details.create_at)))])]),t._v(" "),a("div",{staticClass:"table_cell",staticStyle:{width:"25%","font-size":".6rem",color:"#5f5f5f","text-align":"right","padding-right":".4rem"}},[a("p",[t._v("来自:"+t._s(t.details.tab))]),t._v(" "),a("span",[t._v(t._s(t.details.visit_count)+"次访问")])])]),t._v(" "),a("div",{staticClass:"det_content",domProps:{innerHTML:t._s(t.details.content)}}),t._v(" "),a("div",{staticClass:"follow"},[a("span",[t._v(t._s(t.followFlag?"哈哈哈，您已关注！":"喜欢这篇文章？那就点击关注吧"))]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.sessUser,expression:"!sessUser"}],staticClass:"mask",on:{click:t.toLogin}}),t._v(" "),a("mt-switch",{nativeOn:{change:function(e){t.change(e)}},model:{value:t.followFlag,callback:function(e){t.followFlag=e},expression:"followFlag"}})],1),t._v(" "),t.details.replies.length?a("h2",{staticClass:"commit_count"},[t._v(t._s(t.details.replies.length)+"人评论:")]):a("h2",{staticStyle:{"margin-top":"2rem","text-align":"center"}},[t._v("没有人评论，快来抢沙发...")]),t._v(" "),a("ul",{staticClass:"commit_list"},t._l(t.orderUps,function(e,n){return a("li",{key:n},[a("div",{staticClass:"table",style:{marginTop:"1rem",width:"100%"}},[a("div",{staticClass:"table_cell",staticStyle:{width:"12%"}},[a("img",{attrs:{src:e.author.avatar_url,alt:""}})]),t._v(" "),a("div",{staticClass:"table_cell",staticStyle:{width:"66%","padding-left":".5rem"}},[a("p",[t._v(t._s(e.author.loginname)+" "),a("span",{staticStyle:{color:"#386ac0"}},[t._v("#"+t._s(n+1)+"楼\n              "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.details.author.loginname===e.author.loginname,expression:"details.author.loginname===replies.author.loginname"}]},[t._v("【楼主】")])])]),t._v(" "),a("span",[t._v(t._s(t._f("timeFormat")(e.create_at)))])]),t._v(" "),a("div",{staticClass:"table_cell",staticStyle:{width:"22%","text-align":"right"}},[a("span",{style:{color:t.isUp(e.ups)?"red":"#000"},on:{click:function(a){t.toLove(a,e.id,e.ups.length,n)}}},[a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-zan"}})]),t._v(" "),a("span",[t._v(t._s(e.ups.length)+"  ")])]),t._v(" "),a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"},on:{click:function(a){t.toCommit(e.id,e.author.loginname,t.details.replies.length)}}},[a("use",{attrs:{"xlink:href":"#icon-huifu"}})])])]),t._v(" "),a("div",{staticClass:"commit_content",domProps:{innerHTML:t._s(e.content)}})])})),t._v(" "),a("mt-actionsheet",{attrs:{actions:t.actions,closeOnClickModal:"",cancelText:""},model:{value:t.sheetVisible,callback:function(e){t.sheetVisible=e},expression:"sheetVisible"}})],1):a("p",[a("mt-spinner",{attrs:{type:"snake"}})],1)])},staticRenderFns:[]},lt=a("VU/8")(ot,rt,!1,function(t){a("ZZRB")},null,null).exports,ct={name:"message",data:function(){return{popupMsg:!1,msgTab:"",unreadCount:"",unreadMsg:"",readMsg:""}},computed:J()({},Object(tt.e)(["login"])),mounted:function(){var t=this;this.LOADING(!0);var e=this.format(new Date);console.log(e),this.$ajax({method:"get",url:"/messages",params:{accesstoken:this.login.user.token}}).then(function(e){t.unreadMsg=e.data.data.hasnot_read_messages,t.readMsg=e.data.data.has_read_messages,console.log(e)}).catch(function(t){t&&console.log(t)})},methods:J()({},Object(tt.d)(["LOADING"]),{myMsg:function(t){t.length?(this.popupMsg=!this.popupMsg,this.msgTab=t):o()({message:"暂无消息",duration:500})}})},ut={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message"},[a("mt-cell",{attrs:{title:"未读消息"},nativeOn:{click:function(e){t.myMsg(t.unreadMsg)}}},[a("mt-badge",{staticStyle:{"font-size":"14px"},attrs:{color:t.unreadMsg.length?"#f44336":"#5f5f5f",size:"large"}},[t._v(t._s(t.unreadMsg.length))])],1),t._v(" "),a("mt-cell",{attrs:{title:"已读消息"},nativeOn:{click:function(e){t.myMsg(t.readMsg)}}},[a("mt-badge",{staticStyle:{"font-size":"14px"},attrs:{color:"#5f5f5f",size:"large"}},[t._v(t._s(t.readMsg.length))])],1),t._v(" "),a("mt-popup",{attrs:{position:"bottom",modal:""},model:{value:t.popupMsg,callback:function(e){t.popupMsg=e},expression:"popupMsg"}},[a("div",{staticClass:"my_topic"},[a("p",{staticClass:"back",on:{click:function(e){t.popupMsg=!t.popupMsg}}},[a("i",{staticClass:"mintui mintui-back"}),t._v("返回\n      ")]),t._v(" "),a("ul",{staticClass:"me_msg"},t._l(t.msgTab,function(e,n){return a("li",{key:n},[a("p",{staticClass:"time"},[t._v(t._s(t.format(e.reply.create_at)))]),t._v(" "),a("div",{staticClass:"msg_content"},[a("p",{staticClass:"msg_topic"},[t._v(t._s(e.author.loginname)+"在"),a("router-link",{attrs:{to:{path:"/details",query:{id:e.topic.id}}}},[t._v("【"+t._s(e.topic.title)+"】")]),t._v("中回复你：")],1),t._v(" "),a("p",{staticClass:"msg_reply"},[t._v(t._s(e.reply.content))])])])}))])])],1)},staticRenderFns:[]},dt=a("VU/8")(ct,ut,!1,function(t){a("izjZ")},null,null).exports,pt={name:"about",data:function(){return{aboutMsg:"",typeTopics:"aboutSite",popupVisible:!1,aboutList:[{icon:"#icon-shoucang",text:"关注的主题",count:0,type:"collect_topics"},{icon:"#icon-canyu",text:"回复的主题",count:0,type:"recent_replies"},{icon:"#icon-fabu",text:"发布的主题",count:0,type:"recent_topics"}],aboutSite:[{name:"技术栈：",text:"vue2 + vue-router + vuex + axios + mint-ui + mescroll"},{name:"名称：",text:"vue社区"},{name:"作者：",text:'<a href="">tjjseven</a>'},{name:"GitHub：",text:'<a href="">https://github.com/tjjseven/vue-comy</a>'},{name:"版本：",text:"v1.0.0"},{name:"参考：",text:"111"}],topicName:"",topicTab:"问答",topicValue:""}},computed:J()({},Object(tt.e)(["login","about"])),methods:J()({},Object(tt.b)(["USER_LOGOUT","sendAjax"]),Object(tt.d)(["ABOUT_INFO"]),{release:function(){switch(this.topicTab){case"分享":this.topicTab="share";break;case"问答":this.topicTab="ask";break;case"招聘job":this.topicTab="job"}this.topicName?this.topicValue?this.$ajax({method:"post",url:"/topics ",data:{title:this.topicName,tab:this.topicTab,content:this.topicValue}}).then(function(t){console.log(t),o()({message:"发布成功",duration:1e3})}).catch(function(t){t&&console.log(t),o()({message:"网络错误",duration:1e3})}):o()({message:"内容不能为空",duration:1e3}):o()({message:"标题不能为空",duration:1e3})},logout:function(){var t=this,e=this;O.a.confirm("确定执行此操作?",{closeOnClickModal:!1}).then(function(a){t.USER_LOGOUT(),e.$router.replace({path:"/login"})},function(t){console.log(t)})},getCount:function(){for(var t=0;t<this.aboutList.length;t++)this.aboutList[t].count=this.aboutMsg[this.aboutList[t].type].length},myTopics:function(t){this.popupVisible=!this.popupVisible,this.typeTopics=t}}),mounted:function(){var t=this;this.$ajax({method:"get",url:"/user/"+this.login.user.loginname}).then(function(e){t.aboutMsg=e.data.data,t.ABOUT_INFO(e.data.data),t.getCount()})}},mt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about"},[a("div",{staticClass:"about_header"},[a("div",{staticClass:"about_bg"}),t._v(" "),a("img",{staticClass:"about_picture",attrs:{src:t.login.user.avatar_url,alt:"author"}}),t._v(" "),a("h2",[t._v(t._s(t.login.user.loginname))]),t._v(" "),a("div",{staticClass:"about_edit"},[a("p",{on:{click:function(e){t.myTopics("aboutSite")}}},[t._v("关于")]),t._v(" "),a("p",{on:{click:function(e){t.myTopics("release")}}},[t._v("发布")])])]),t._v(" "),a("div",{staticClass:"about_list"},[t._l(t.aboutList,function(e,n){return a("div",{key:n,staticClass:"table list_div",on:{click:function(a){t.myTopics(e.type)}}},[a("div",{staticClass:"list_left table_cell"},[a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":e.icon}})])]),t._v(" "),a("div",{staticClass:"list_center table_cell"},[t._v(t._s(e.text)+"\n        "),a("span",[t._v("("+t._s(e.count)+")")])]),t._v(" "),a("div",{staticClass:"list_right table_cell"},[a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-you"}})])])])}),t._v(" "),a("p",{staticClass:"logout",on:{click:t.logout}},[t._v("退出")])],2),t._v(" "),a("mt-popup",{attrs:{position:"right",modal:""},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[a("div",{staticClass:"my_topic"},[a("p",{staticClass:"back",on:{click:function(e){t.popupVisible=!t.popupVisible}}},[a("i",{staticClass:"mintui mintui-back"}),t._v("返回\n      ")]),t._v(" "),"aboutSite"===t.typeTopics?a("div",{staticClass:"about_site"},[a("table",{attrs:{border:"0"}},t._l(t.aboutSite,function(e,n){return a("tr",{key:n},[a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",{staticStyle:{"word-break":"break-all"},domProps:{innerHTML:t._s(e.text)}})])}))]):"release"===t.typeTopics?a("div",{staticClass:"release"},[a("mt-field",{attrs:{label:"主题名称：",placeholder:"请输入主题名称"},model:{value:t.topicName,callback:function(e){t.topicName=e},expression:"topicName"}}),t._v(" "),a("mt-radio",{attrs:{title:"主题分类：",options:["分享","问答","招聘"]},model:{value:t.topicTab,callback:function(e){t.topicTab=e},expression:"topicTab"}}),t._v(" "),a("mt-field",{attrs:{label:"主题内容：",placeholder:"请输入主题内容",type:"textarea",rows:"7"},model:{value:t.topicValue,callback:function(e){t.topicValue=e},expression:"topicValue"}}),t._v(" "),a("p",{staticClass:"releaseBtn",on:{click:t.release}},[t._v("发布")])],1):a("ul",{staticClass:"topic_list"},[0===t.aboutMsg[t.typeTopics].length?a("p",[t._v("暂无主题...")]):t._l(t.aboutMsg[t.typeTopics],function(e,n){return a("router-link",{key:n,attrs:{to:{path:"/details",query:{id:e.id}},tag:"li"}},[a("div",{staticClass:"two_ell"},[t._v(t._s(e.title))]),t._v(" "),a("div",{staticClass:"topic_author"},[a("span",[t._v("作者:"+t._s(e.author.loginname))]),t._v(" "),a("span",{staticStyle:{float:"right"}},[t._v("最近回复:"+t._s(t._f("timeFormat")(e.last_reply_at)))])])])})],2)])])],1)},staticRenderFns:[]},ht=a("VU/8")(pt,mt,!1,function(t){a("I1G2")},null,null).exports,ft={name:"login",data:function(){return{tokenFlag:!1,user:{token:"a38f7992-0096-4c65-b3ff-b7db7d264d98"}}},methods:J()({},Object(tt.b)(["USER_LOGIN"]),Object(tt.d)(["ABOUT_INFO","LOADING"]),{sub:function(){var t=this;this.user.token?(this.LOADING(!0),this.$ajax({method:"post",url:"/accesstoken",params:{accesstoken:this.user.token}}).then(function(e){for(var a in e.data)t.$set(t.user,a,e.data[a]);t.USER_LOGIN(t.user),t.$ajax({method:"get",url:"/user/"+t.user.loginname}).then(function(e){t.ABOUT_INFO(e.data.data)}),"/login"===t.$route.fullPath&&t.$router.replace({path:"/about"}),t.$router.replace({path:t.$route.query.redirect})}).catch(function(t){t&&(console.log(t),o()({message:"token或网络错误，登录失败",duration:1e3}))})):o()({message:"不能为空",duration:500})}})},gt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("mt-field",{attrs:{label:"Access Token",placeholder:"请输入token"},model:{value:t.user.token,callback:function(e){t.$set(t.user,"token",e)},expression:"user.token"}}),t._v(" "),a("mt-button",{attrs:{type:"primary",size:"large"},on:{click:t.sub}},[t._v("登录")]),t._v(" "),a("div",{staticClass:"mint-field-state is-warning tips"},[a("i",{staticClass:"mintui mintui-field-warning"}),t._v(" "),a("span",{on:{click:function(e){t.tokenFlag=!t.tokenFlag}}},[t._v("如何获取Access Token")])]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:t.tokenFlag,expression:"tokenFlag"}],staticStyle:{margin:"0 .5rem","line-height":"1rem","font-size":"12px","word-break":"break-all"}},[t._v("\n    登录"),a("a",{staticStyle:{color:"#41b883"},attrs:{href:"https://www.vue-js.com"}},[t._v("vue社区")]),t._v("，在设置页面就可以看到自己的Access Token\n  ")])],1)},staticRenderFns:[]},vt=a("VU/8")(ft,gt,!1,function(t){a("0jrQ")},null,null).exports;q.default.use(Z.a);var _t,bt,yt=new Z.a({mode:"history",saveScrollPosition:!0,linkExactActiveClass:"actClass",routes:[{path:"/",name:"index",component:it,meta:{keepAlive:!0,auth:!1},children:[]},{path:"/details",name:"detail",component:lt,meta:{keepAlive:!1,auth:!1}},{path:"/message",name:"message",component:dt,meta:{keepAlive:!1,auth:!0}},{path:"/about",name:"about",component:ht,meta:{keepAlive:!1,auth:!0}},{path:"/login",name:"Login",component:vt},{path:"*",redirect:"/login"}]}),kt=a("bOdI"),Ct=a.n(kt),xt="USER_LOGIN",Ot="USER_LOGOUT",wt=a("mtWM"),St=a.n(wt),jt=function(t,e){t.commit;var a="";return St()({method:e.method,url:e.url,params:e.params||{}}).then(function(t){a=t}).catch(function(t){t&&(a=t)}),a},At=a("fZjL"),Tt=a.n(At),Lt=a("woOf"),Mt=a.n(Lt),$t=a("mvHQ"),Ft=a.n($t),Ut={state:{user:JSON.parse(sessionStorage.getItem("user"))||{}},mutations:(_t={},Ct()(_t,xt,function(t,e){sessionStorage.setItem("user",Ft()(e)),Mt()(t.user,e)}),Ct()(_t,Ot,function(t){sessionStorage.removeItem("user"),Tt()(t.user).forEach(function(e){return q.default.delete(t.user,e)})}),_t),actions:(bt={},Ct()(bt,xt,function(t,e){(0,t.commit)(xt,e)}),Ct()(bt,Ot,function(t){(0,t.commit)(Ot)}),bt)},Vt={state:{about:{}},mutations:Ct()({},"ABOUT_INFO",function(t,e){t.about=e})},It={state:{detail:{}},mutations:Ct()({},"DETAILS",function(t,e){t.detail=e}),getters:{}};q.default.use(tt.a);var Nt=new tt.a.Store({state:{pubState:!1},mutations:Ct()({},"LOADING",function(t,e){t.pubState=e}),actions:s,modules:{login:Ut,about:Vt,detail:It}}),Dt=a("pFYg"),Et=a.n(Dt),Rt=Array.prototype,Bt=Object.prototype,Gt=(Rt.slice,Bt.toString),qt={};qt.isArray=function(t){return Array.isArray(t)};var Ht=Math.pow(2,53)-1;qt.isArrayLike=function(t){if("object"!==(void 0===t?"undefined":Et()(t))||!t)return!1;var e=t.length;return"number"==typeof e&&e%1==0&&e>=0&&e<=Ht},qt.isObject=function(t){var e=void 0===t?"undefined":Et()(t);return"function"===e||"object"===e&&!!t},qt.each=function(t,e){var a,n;if(qt.isArray(t))for(a=0,n=t.length;a<n&&!1!==e(t[a],a,t);a++);else for(a in t)if(!1===e(t[a],a,t))break;return t},qt.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){qt["is"+t]=function(e){return Gt.call(e)==="[object "+t+"]"}}),qt.toArray=function(t,e){e=e||0;for(var a=t.length-e,n=new Array(a);a--;)n[a]=t[a+e];return n},qt.toNumber=function(t){if("string"!=typeof t)return t;var e=Number(t);return isNaN(e)?t:e},qt.convertArray=function(t){if(qt.isArray(t))return t;if(qt.isPlainObject(t)){for(var e,a=Tt()(t),n=a.length,s=new Array(n);n--;)e=a[n],s[n]={$key:e,$value:t[e]};return s}return t||[]},qt.getPath=function(t,e){return n(t,e.split("."))};Gt=Object.prototype.toString;qt.isPlainObject=function(t){return"[object Object]"===Gt.call(t)};var Yt=qt,Pt={};Pt.install=function(t,e){t.filter("timeFormat",function(t){var e=[0,60,3600,86400,2592e3,94608e4,Number.MAX_VALUE],a=["刚刚","分钟前","小时前","天前","月前","年前"],n=new Date(t).getTime(),s=((new Date).getTime()-n)/1e3,i=e.findIndex(function(t,a){return t<=s&&e[a+1]>s});return i<=0?a[0]:(s=s/e[i]|0)+a[i]}),t.prototype.orderBy=function(t){function e(t,e,n){var s=a[n];return s&&("$key"!==s&&(Yt.isObject(t)&&"$value"in t&&(t=t.$value),Yt.isObject(e)&&"$value"in e&&(e=e.$value)),t=Yt.isObject(t)?Yt.getPath(t,s):t,e=Yt.isObject(e)?Yt.getPath(e,s):e),t===e?0:t>e?i:-i}var a,n=null;t=Yt.convertArray(t);var s=Yt.toArray(arguments,1),i=s[s.length-1];"number"==typeof i?(i=i<0?-1:1,s=s.length>1?s.slice(0,-1):s):i=1;var o=s[0];return o?("function"==typeof o?n=function(t,e){return o(t,e)*i}:(a=Array.prototype.concat.apply([],s),n=function(t,s,i){return(i=i||0)>=a.length-1?e(t,s,i):e(t,s,i)||n(t,s,i+1)}),t.slice().sort(n)):t},t.prototype.format=function(t){return Date.prototype.Format=function(t){var e=t,a=["凌晨","上午","中午","下午","晚上"],n=this.getHours(),s="";switch(!0){case n>=0&&n<=5:s=a[0];break;case n>5&&n<=11:s=a[1];break;case n>11&&n<=13:s=a[2];break;case n>13&&n<18:s=a[3];break;case n>=18&&n<=24:s=a[4]}e=(e=e.replace(/yyyy|YYYY/,this.getFullYear())).replace(/yy|YY/,this.getYear()%100>9?(this.getYear()%100).toString():"0"+this.getYear()%100);var i=this.getMonth()+1;return e=e.replace(/MM/,i>9?i.toString():"0"+i),e=e.replace(/M/g,i),e=e.replace(/w|W/g,["日","一","二","三","四","五","六"][this.getDay()]),e=e.replace(/dd|DD/,this.getDate()>9?this.getDate().toString():"0"+this.getDate()),e=e.replace(/d|D/g,this.getDate()),e=e.replace(/hh|HH/,this.getHours()>9?s+this.getHours().toString():s+"0"+this.getHours()),e=e.replace(/h|H/g,s+this.getHours()),e=e.replace(/mm/,this.getMinutes()>9?this.getMinutes().toString():"0"+this.getMinutes()),e=e.replace(/m/g,this.getMinutes()),e=e.replace(/ss|SS/,this.getSeconds()>9?this.getSeconds().toString():"0"+this.getSeconds()),e=e.replace(/s|S/g,this.getSeconds())},new Date(t).Format("yyyy年MM月dd日 hh:mm:ss 星期w")},t.prototype.$service={telNumberCheck:function(t){return/(^(([0\+]\d{2,3}-)?(0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$)|(^0{0,1}1[3|4|5|6|7|8|9][0-9]{9}$)/.test(t)}},t.mixin({created:function(){}})};var zt=Pt;a("d8/S");q.default.use(zt),q.default.prototype.$ajax=St.a,St.a.defaults.baseURL="https://www.vue-js.com/api/v1",St.a.defaults.timeout=5e3,q.default.component(G.a.name,G.a),q.default.component(R.a.name,R.a),q.default.component(D.a.name,D.a),q.default.component(I.a.name,I.a),q.default.component(U.a.name,U.a),q.default.component($.a.name,$.a),q.default.component(L.a.name,L.a),q.default.component(A.a.name,A.a),q.default.component(S.a.name,S.a),q.default.component(O.a.name,O.a),q.default.component(C.a.name,C.a),q.default.component(y.a.name,y.a),q.default.component(_.a.name,_.a),q.default.component(g.a.name,g.a),q.default.component(h.a.name,h.a),q.default.component(p.a.name,p.a),St.a.interceptors.request.use(function(t){return console.log(Nt.state.pubState),Nt.state.pubState&&u.a.open({spinnerType:"fading-circle"}),t},function(t){return u.a.close(),l.a.reject(t)}),St.a.interceptors.response.use(function(t){return u.a.close(),t},function(t){return u.a.close(),o()({message:"请求超时，请检查网络设置",duration:1e3}),l.a.reject(t)}),q.default.config.productionTip=!1,new q.default({el:"#app",router:yt,store:Nt,template:"<App/>",components:{App:Q}}),yt.beforeEach(function(t,e,a){var n=t.meta.auth,s=Boolean(Nt.state.login.user.token);if(n&&!s&&"/login"!==t.path)return a({path:"/login",query:{redirect:t.fullPath}});a()})},OgVB:function(t,e){},RQR2:function(t,e){},TVDE:function(t,e){},UIRh:function(t,e){},ULTG:function(t,e){},XDqQ:function(t,e){},ZZRB:function(t,e){},"d8/S":function(t,e){},f1Vh:function(t,e){},goBr:function(t,e){},izjZ:function(t,e){},jayP:function(t,e){},joTY:function(t,e){},lrMw:function(t,e){},"q/am":function(t,e){},qONS:function(t,e){},rYKV:function(t,e){},"y+mr":function(t,e){}},["NHnr"]);